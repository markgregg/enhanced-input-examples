import{r as m,j as o}from"./index-Dv3onwxY.js";import{i as w,a as p,C as h,t as y,b as S,c as A,d as D,e as E,f as I,S as j}from"./data-BytGOI_h.js";function B(){const[g,b]=m.useState(""),[f,x]=m.useState([]);m.useEffect(()=>{a("Click the X button to clear the text",0,!0)},[]);const a=(r,i,s)=>{const l=r.trimEnd().lastIndexOf(" ",r[i]===" "?i-1:i)+1,C=r.substring(l).split(/ |\n|\r|\t/),n=f.filter(t=>!s&&t.id!=="bad-edit"||t.start+t.length<l&&t.id!=="bad-edit"),c="margin-right: 2px;";let e=l;C.forEach(t=>{if(t.match(w))s&&(p.includes(t.toUpperCase())?n.push({id:`isin${e}`,start:e,length:t.length,style:c,Decorator:h,decoratorStyle:{backgroundColor:"rgb(68, 68, 68)",color:"white",fontFamily:"Inter, system-ui, Avenir, Helvetica, Arial, sans-serif"}}):n.push({id:`isin${e}`,start:e,length:t.length,style:c,Decorator:h,decoratorStyle:{backgroundColor:"rgb(154, 61, 55)",color:"white",fontFamily:"Inter, system-ui, Avenir, Helvetica, Arial, sans-serif"}}));else if(y.includes(t))s&&n.push({id:`ticker${e}`,start:e,length:t.length,style:c,Decorator:h,decoratorStyle:{backgroundColor:"rgb(68, 68, 68)",color:"white",fontFamily:"Inter, system-ui, Avenir, Helvetica, Arial, sans-serif"}});else if(S(t))s&&n.push({id:`vol${e}`,start:e,length:t.length,style:c,customProps:"Size",Decorator:h,decoratorStyle:{backgroundColor:"rgb(68, 68, 68)",color:"white",fontFamily:"Inter, system-ui, Avenir, Helvetica, Arial, sans-serif"}});else if(A(t))s&&n.push({id:`prc${e}`,start:e,length:t.length,style:c,Decorator:h,decoratorStyle:{backgroundColor:"rgb(68, 68, 68)",color:"white",fontFamily:"Inter, system-ui, Avenir, Helvetica, Arial, sans-serif"}});else if(i>=e&&i<=e+t.trimEnd().length&&t[i]!==""){if(t.match(D)){const d=p.filter(u=>u.includes(t));d.length>0&&n.push({id:"bad-edit",start:e,length:t.length,style:"font-style: italic;font-weight: bold;",dropDown:{activation:"cursorposition",options:d.slice(0,5)}})}else if(t.match(E)){const d=y.filter(u=>u.includes(t));d.length>0&&n.push({id:"bad-edit",start:e,length:t.length,style:"font-style: italic;font-weight: bold;",dropDown:{activation:"cursorposition",options:d.slice(0,5)}})}}e=e+t.length+1}),JSON.stringify(n)!==JSON.stringify(f)&&x(n),s&&b(r)},v=(r,i)=>{const s=f.find(l=>l.id===r);if(s){const l=g.substring(0,s.start)+i+g.substring(s.start+s.length);a(l,s.start,!0)}};return o.jsxs("div",{children:[o.jsx("span",{children:"Input decorators can be any element. The below example shows a clear button."}),o.jsx("pre",{children:`
inputDecorator={<ClearButton onClick={() => handleChange('', 0, true)} />}
`}),o.jsx("div",{style:{height:"400px",width:"600px",position:"relative"},children:o.jsx(I,{style:{fontFamily:"Inter, system-ui, Avenir, Helvetica, Arial, sans-serif"},lineHeight:"40px",text:g,textBlocks:f,inputDecorator:o.jsx(j,{onClick:()=>a("",0,!0)}),onChange:(r,i)=>a(r,i,!0),onCursorPositionChanged:(r,i)=>a(r,i),onDropDownItemSelected:(r,i)=>v(r,i)})})]})}typeof window<"u"&&window.document&&window.document.createElement&&document.documentElement.setAttribute("data-storyloaded","");export{B as InputDecorator};
