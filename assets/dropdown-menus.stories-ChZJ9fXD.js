import{r as u,j as r}from"./index-Dv3onwxY.js";import{i as j,a as p,t as m,b as v,c as E,d as B,e as S,f as D}from"./data-BytGOI_h.js";function O(){const[f,x]=u.useState(""),[c,b]=u.useState([]);u.useEffect(()=>{d("Type XS1 at the end of the line ",0,!0)},[]);const d=(s,e,n)=>{const o=s.trimEnd().lastIndexOf(" ",s[e]===" "?e-1:e)+1,y=s.substring(o).split(/ |\n|\r|\t/),l=c.filter(t=>!n&&t.id!=="bad-edit"||t.start+t.length<o&&t.id!=="bad-edit"),h="margin-right: 2px;";let i=o;y.forEach(t=>{if(t.match(j))n&&p.includes(t.toUpperCase())&&l.push({id:`isin${i}`,start:i,length:t.length,style:h});else if(m.includes(t))n&&l.push({id:`ticker${i}`,start:i,length:t.length,style:h});else if(v(t))n&&l.push({id:`vol${i}`,start:i,length:t.length,style:h});else if(E(t))n&&l.push({id:`prc${i}`,start:i,length:t.length,style:h});else if(e>=i&&e<=i+t.trimEnd().length&&t[e]!==""){if(t.match(B)){const a=p.filter(g=>g.includes(t));a.length>0&&l.push({id:"bad-edit",start:i,length:t.length,style:"font-style: italic;font-weight: bold;",dropDown:{activation:"cursorposition",options:a.slice(0,5)}})}else if(t.match(S)){const a=m.filter(g=>g.includes(t));a.length>0&&l.push({id:"bad-edit",start:i,length:t.length,style:"font-style: italic;font-weight: bold;",dropDown:{activation:"cursorposition",options:a.slice(0,5)}})}}i=i+t.length+1}),JSON.stringify(l)!==JSON.stringify(c)&&b(l),n&&x(s)},w=(s,e)=>{const n=c.find(o=>o.id===s);if(n){const o=f.substring(0,n.start)+e+f.substring(n.start+n.length);d(o,n.start,!0)}};return r.jsxs("div",{children:[r.jsxs("span",{children:["Dropdowns list can be assoicated against a TextBlock. They will always appear just below the block. They can be activiated either by -",r.jsx("br",{}),r.jsx("br",{}),r.jsx("b",{children:"cursorposition:"})," when the cursor is within the TextBlock",r.jsx("br",{}),r.jsx("b",{children:"mouseover:"})," when the mouse is over the TextBlock"]}),r.jsx("pre",{children:`
TextBlock
{
  id: 'bad-edit',
  start: pos,
  length: token.length,
  style: 'font-style: italic;font-weight: bold;',
  dropDown: {
    activation: 'cursorposition',
    options: ['item1', 'item2', 'item3'],
  }
}`}),r.jsx("div",{style:{height:"300px",width:"600px",position:"relative"},children:r.jsx(D,{style:{fontFamily:"Inter, system-ui, Avenir, Helvetica, Arial, sans-serif"},lineHeight:"40px",text:f,textBlocks:c,onChange:(s,e)=>d(s,e,!0),onCursorPositionChanged:(s,e)=>d(s,e),onDropDownItemSelected:(s,e)=>w(s,e)})})]})}typeof window<"u"&&window.document&&window.document.createElement&&document.documentElement.setAttribute("data-storyloaded","");export{O as DropdownMenus};
