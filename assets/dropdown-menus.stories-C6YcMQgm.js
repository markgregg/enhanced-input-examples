import{r as u,j as r}from"./index-DdOMIuFn.js";import{i as j,a as p,t as x,b as v,c as E,d as S,e as B,f as D,S as C}from"./data-z-L1E-BD.js";function P(){const[f,m]=u.useState(""),[h,b]=u.useState([]);u.useEffect(()=>{a("Type XS1 at the end of the line ",0,!0)},[]);const a=(s,e,n)=>{const o=s.trimEnd().lastIndexOf(" ",s[e]===" "?e-1:e)+1,w=s.substring(o).split(/ |\n|\r|\t/),l=h.filter(t=>!n&&t.id!=="bad-edit"||t.start+t.length<o&&t.id!=="bad-edit"),d="margin-right: 2px;";let i=o;w.forEach(t=>{if(t.match(j))n&&p.includes(t.toUpperCase())&&l.push({id:`isin${i}`,start:i,length:t.length,style:d});else if(x.includes(t))n&&l.push({id:`ticker${i}`,start:i,length:t.length,style:d});else if(v(t))n&&l.push({id:`vol${i}`,start:i,length:t.length,style:d});else if(E(t))n&&l.push({id:`prc${i}`,start:i,length:t.length,style:d});else if(e>=i&&e<=i+t.trimEnd().length&&t[e]!==""){if(t.match(S)){const c=p.filter(g=>g.includes(t));c.length>0&&l.push({id:"bad-edit",start:i,length:t.length,style:"font-style: italic;font-weight: bold;",dropDown:{activation:"cursorposition",options:c.slice(0,5)}})}else if(t.match(B)){const c=x.filter(g=>g.includes(t));c.length>0&&l.push({id:"bad-edit",start:i,length:t.length,style:"font-style: italic;font-weight: bold;",dropDown:{activation:"cursorposition",options:c.slice(0,5)}})}}i=i+t.length+1}),JSON.stringify(l)!==JSON.stringify(h)&&b(l),n&&m(s)},y=(s,e)=>{const n=h.find(o=>o.id===s);if(n){const o=f.substring(0,n.start)+e+f.substring(n.start+n.length);a(o,n.start,!0)}};return r.jsxs("div",{children:[r.jsxs("span",{children:["Dropdowns list can be assoicated against a TextBlock. They will always appear just below the block. They can be activiated either by -",r.jsx("br",{}),r.jsx("br",{}),r.jsx("b",{children:"cursorposition:"})," when the cursor is within the TextBlock",r.jsx("br",{}),r.jsx("b",{children:"mouseover:"})," when the mouse is over the TextBlock"]}),r.jsx("pre",{children:`
TextBlock
{
  id: 'bad-edit',
  start: pos,
  length: token.length,
  style: 'font-style: italic;font-weight: bold;',
  dropDown: {
    activation: 'cursorposition',
    options: ['item1', 'item2', 'item3'],
  }
}`}),r.jsx("div",{style:{height:"300px",width:"600px",position:"relative"},children:r.jsx(D,{style:{fontFamily:"Inter, system-ui, Avenir, Helvetica, Arial, sans-serif"},lineHeight:"40px",text:f,textBlocks:h,inputDecorator:r.jsx(C,{onClick:()=>a("",0,!0)}),onChange:(s,e)=>a(s,e,!0),onCursorPositionChanged:(s,e)=>a(s,e),onDropDownItemSelected:(s,e)=>y(s,e)})})]})}typeof window<"u"&&window.document&&window.document.createElement&&document.documentElement.setAttribute("data-storyloaded","");export{P as PillDecorators};
